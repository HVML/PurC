# test cases for socket
negative:
    $SYS.pipe(null)
    WrongDataType

negative:
    $SYS.pipe('foo')
    InvalidValue

negative:
    $SYS.fdflags()
    ArgumentMissed

negative:
    $SYS.fdflags(null, null)
    WrongDataType

negative:
    $SYS.fdflags(0)
    ArgumentMissed

negative:
    $SYS.fdflags(0, null)
    WrongDataType

negative:
    $SYS.fdflags(0, 'foo')
    InvalidValue

negative:
    $SYS.fdflags(! )
    ArgumentMissed

negative:
    $SYS.fdflags(! null, null )
    WrongDataType

negative:
    $SYS.fdflags(! 0 )
    ArgumentMissed

negative:
    $SYS.fdflags(! 0, null )
    WrongDataType

negative:
    $SYS.fdflags(! 0, 'foo' )
    InvalidValue

positive:
    $RUNNER.user(! "myPipe", $SYS.pipe() )
    true

positive:
    $DATA.type($RUNNER.myObj.myPipe)
    'tuple'

positive:
    $DATA.type($RUNNER.myObj.myPipe[0])
    'longint'

negative:
    $SYS.fdflags($RUNNER.myObj.myPipe[0])
    ArgumentMissed

negative:
    $SYS.fdflags($RUNNER.myObj.myPipe[0], null)
    WrongDataType

negative:
    $SYS.fdflags($RUNNER.myObj.myPipe[0], '')
    InvalidValue

positive:
    $SYS.fdflags($RUNNER.myObj.myPipe[0], 'cloexec')
    true

positive:
    $SYS.fdflags($RUNNER.myObj.myPipe[1], 'cloexec')
    true

negative:
    $SYS.fdflags(! $RUNNER.myObj.myPipe[0] )
    ArgumentMissed

negative:
    $SYS.fdflags(! $RUNNER.myObj.myPipe[0], null )
    WrongDataType

negative:
    $SYS.fdflags(! $RUNNER.myObj.myPipe[0], '' )
    InvalidValue

negative:
    $SYS.fdflags(! $RUNNER.myObj.myPipe[0], 'foo' )
    InvalidValue

positive:
    $SYS.fdflags(! $RUNNER.myObj.myPipe[0], 'nonblock' )
    true

positive:
    $SYS.fdflags($RUNNER.myObj.myPipe[0], 'nonblock')
    true

positive:
    $SYS.close($RUNNER.myObj.myPipe[0])
    true

negative:
    $SYS.fdflags($RUNNER.myObj.myPipe[0], 'nonblock')
    InvalidValue

positive:
    $RUNNER.user(! "myPipe", undefined )
    true

negative:
    $SYS.sockopt()
    ArgumentMissed

negative:
    $SYS.sockopt(null, null)
    WrongDataType

negative:
    $SYS.sockopt('', '')
    WrongDataType

negative:
    $SYS.sockopt(0, 'foo')
    InvalidValue

negative:
    $SYS.sockopt(0, 'type')
    OSFailure

negative:
    $SYS.sockopt(0, 'recv-timeout')
    OSFailure

negative:
    $SYS.sockopt(0, 'send-timeout')
    OSFailure

negative:
    $SYS.sockopt(0, 'recv-buffer')
    OSFailure

negative:
    $SYS.sockopt(0, 'send-buffer')
    OSFailure

negative:
    $SYS.sockopt(0, 'send-buffer')
    OSFailure

positive:
    $RUNNER.user(! "inetStreamSocket", $SOCKET.stream('inet4://localhost:8080') )
    true

positive:
    $SYS.sockopt($RUNNER.myObj.inetStreamSocket.fd, 'type')
    'stream'

positive:
    $SYS.sockopt(! $RUNNER.myObj.inetStreamSocket.fd, 'keep-alive', true)
    true

positive:
    $SYS.sockopt($RUNNER.myObj.inetStreamSocket.fd, 'keep-alive')
    true

positive:
    $SYS.sockopt(! $RUNNER.myObj.inetStreamSocket.fd, 'recv-timeout', 3)
    true

positive:
    $SYS.sockopt($RUNNER.myObj.inetStreamSocket.fd, 'recv-timeout')
    3.0

positive:
    $SYS.sockopt(! $RUNNER.myObj.inetStreamSocket.fd, 'send-timeout', 3)
    true

positive:
    $SYS.sockopt($RUNNER.myObj.inetStreamSocket.fd, 'send-timeout')
    3.0

positive:
    $SYS.sockopt(! $RUNNER.myObj.inetStreamSocket.fd, 'recv-buffer', 1024)
    true

positive:
    $SYS.sockopt($RUNNER.myObj.inetStreamSocket.fd, 'recv-buffer')
    1024L

positive:
    $SYS.sockopt(! $RUNNER.myObj.inetStreamSocket.fd, 'send-buffer', 1024)
    true

positive:
    $SYS.sockopt($RUNNER.myObj.inetStreamSocket.fd, 'send-buffer')
    1024L

positive:
    $RUNNER.user(! 'inetStreamSocket', undefined )
    true

positive:
    $RUNNER.user(! "inetDgramSocket", $SOCKET.dgram('inet4://localhost:8080') )
    true

positive:
    $SYS.sockopt($RUNNER.myObj.inetDgramSocket.fd, 'type')
    'dgram'

positive:
    $RUNNER.user(! 'inetDgramSocket', undefined )
    true

